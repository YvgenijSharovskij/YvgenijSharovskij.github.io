!function(a,b,c){"use strict";function d(){var a=c.createElement("script");a.src="//browser-update.org/update.min.js",c.body.appendChild(a)}a(c).ready(function(a){function d(b,c){var d=a(".project-empty").find("img");a(".project-title").remove(),a(".project-description").remove(),a(".button").remove(),j.hasClass("add-info")?f(d,b,c,"close"):(e(d,b,c),a(".open-left-img").remove())}function e(c,d,e){var f=c.parent(".project-item"),g=c.offset().top-a(b).scrollTop(),h=c.offset().left;l.removeClass("overlay-layer"),j.velocity("stop").removeClass("add-info open-animate is-visible").css({top:g+"px",left:h+"px",width:"0px"}),f.removeClass("project-empty")}function f(c,d,e,f){var g=c.parent(".project-item"),h=c.offset().top-a(b).scrollTop(),k=c.offset().left,p=c.width(),q=d/2;Modernizr.mq("screen and (max-width: 40rem)")&&i(),"open"===f?(g.addClass("project-empty"),j.css({opacity:1,top:h+"px",left:k+"px",width:p+"px"}).velocity({top:n+"px",left:q+"px",width:d+"px"},900,[400,20],function(){j.addClass("open-animate").velocity({top:n+"px",left:m+"px",width:o+"px"},300,"ease-in",function(){j.addClass("add-info")})}).addClass("is-visible")):"close"===f&&(j.removeClass("add-info").velocity({top:n+"px",left:q+"px",width:d+"px"},300,"ease-out",function(){j.removeClass("open-animate").velocity({top:h+"px",left:k+"px",width:p/3+"px",opacity:0},300,"linear",function(){j.removeClass("is-visible"),a(".open-left-img").remove(),g.removeClass("project-empty")})}),l.removeClass("overlay-layer"))}function g(){var c=a(b).scrollTop(),d=c+a(b).height();a.each(q,function(){var b=a(this),e=b.outerHeight(),f=b.offset().top;f+e-70>=c&&f+70<=d&&b.addClass("in-view")})}function h(){i(),j.css({top:n+"px",left:m+"px",width:o+"px"})}function i(){m=a(b).width()/8,n=a(b).height()/8,o=.8*a(b).width()<k?.8*a(b).width():k}var j=a(".project-open"),k=a(".project-open").outerWidth(),l=a("body"),m=0,n=0,o=0,p=a(".projects-container a"),q=a(".onScroll-animate"),r=c.getElementById("project-open-container"),s=new Hammer(r);p.on("click",function(){var b="#"+a(this).attr("id"),c=a(this).parent(".project-item").children("img");l.addClass("overlay-layer"),a.ajax({type:"GET",url:"archive.xml",dataType:"xml",success:function(c){a("projectOpen"+b,c).each(function(){var b=a(this).find("imgSource").text();a("<img/>").addClass("open-left-img").attr("src",b).appendTo(".open-left");var c=a(this).find("title").text();a("<span/>").addClass("project-title").text(c).appendTo(".project-info");var d=a(this).find("projectDescription").text();a("<p/>").addClass("project-description").text(d).appendTo(".project-info");var e=a(this).find("button").text(),f=a(this).find("buttonHref").text();a("<a/>").addClass("button").attr("href",f).text(e).appendTo(".project-info")})},error:function(){alert("An error occurred while processing the XML file.")}}),f(c,400,k,"open")}),l.on("click",function(b){(a(b.target).is(".close-x")||a(b.target).is("body.overlay-layer")||a(b.target).is(".project-empty"))&&d(400,k)}),a(c).keyup(function(a){j.hasClass("is-visible")&&"27"===a.which&&d(400,k)}),s.on("swipe",function(){j.hasClass("is-visible")&&d(400,k)}),a(b).on("scroll resize reload",g),a(b).trigger("scroll"),a(b).on("resize reload",function(){requestAnimationFrame(h)}),h()});try{c.addEventListener("DOMContentLoaded",d,!1)}catch(a){b.attachEvent("onload",d)}}(window.jQuery,window,document);