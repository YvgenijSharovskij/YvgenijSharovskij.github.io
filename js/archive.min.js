!function(a,b,c){"use strict";function d(){var a=c.createElement("script");a.src="//browser-update.org/update.min.js",c.body.appendChild(a)}a(c).ready(function(a){function d(b,c){var d=a(".project-empty").find("img");j.hasClass("add-info")?f(d,b,c,"close",p):e(d,b,c)}function e(c,d,e){var f=c.parent(".project-item"),g=c.offset().top-a(b).scrollTop(),h=c.offset().left;c.width();l.removeClass("overlay-layer"),j.velocity("stop").removeClass("add-info open-animate is-visible").css({top:g+"px",left:h+"px",width:"0px"}),f.removeClass("project-empty")}function f(c,d,e,f,g){var h=c.parent(".project-item"),k=(a(b).height(),c.offset().top-a(b).scrollTop()),p=c.offset().left,q=c.width(),r=(c.height(),d/2);Modernizr.mq("screen and (max-width: 40rem)")&&i(),"open"==f?(h.addClass("project-empty"),a(""+g).css({opacity:1,top:k+"px",left:p+"px",width:q+"px"}).velocity({top:n+"px",left:r+"px",width:d+"px"},900,[400,20],function(){a(""+g).addClass("open-animate").velocity({top:n+"px",left:m+"px",width:o+"px"},300,"ease-in",function(){a(""+g).addClass("add-info")})}).addClass("is-visible")):"close"==f&&(j.removeClass("add-info").velocity({top:n+"px",left:r+"px",width:d+"px"},300,"ease-out",function(){j.removeClass("open-animate").velocity({top:k+"px",left:p+"px",width:q/3+"px",opacity:0},300,"linear",function(){j.removeClass("is-visible"),h.removeClass("project-empty")})}),l.removeClass("overlay-layer"))}function g(){var c=a(b).scrollTop(),d=c+a(b).height();a.each(r,function(){var b=a(this),e=b.outerHeight(),f=b.offset().top;f+e-70>=c&&f+70<=d&&b.addClass("in-view")})}function h(){i(),j.css({top:n+"px",left:m+"px",width:o+"px"})}function i(){m=a(b).width()/8,n=a(b).height()/8,o=.8*a(b).width()<k?.8*a(b).width():k}var j=a(".project-open"),k=a(".project-open").outerWidth(),l=a("body"),m=0,n=0,o=0,p=0,q=a(".projects-container a"),r=a(".onScroll-animate"),s=c.getElementById("project-open-container"),t=new Hammer(s);q.on("click",function(){var b=a(this).attr("href"),c=a(this).parent(".project-item").children("img");l.addClass("overlay-layer"),f(c,400,k,"open",b)}),l.on("click",function(b){(a(b.target).is(".close-x")||a(b.target).is("body.overlay-layer")||a(b.target).is(".project-empty"))&&d(400,k)}),a(c).keyup(function(a){j.hasClass("is-visible")&&"27"==a.which&&d(400,k)}),t.on("swipe",function(){j.hasClass("is-visible")&&d(400,k)}),a(b).on("scroll resize reload",g),a(b).trigger("scroll"),a(b).on("resize reload",function(){requestAnimationFrame(h)}),h()});try{c.addEventListener("DOMContentLoaded",d,!1)}catch(a){b.attachEvent("onload",d)}}(window.jQuery,window,document);